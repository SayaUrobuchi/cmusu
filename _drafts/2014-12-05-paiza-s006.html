---
layout: post
title: "[paiza] S006:ビリヤードの球突き"
date: '2014-12-05T23:30:00.002+08:00'
author: 沙耶
tags:
- paiza
modified_time: '2014-12-09T21:38:59.480+08:00'
blogger_id: tag:blogger.com,1999:blog-8266072452384584139.post-3379853236802976159
blogger_orig_url: http://cmusu.blogspot.com/2014/12/paiza-s006.html
---

在橫長a、縱長b的撞球台上，座標(x, y)處有一顆半徑r的小白球。<br />以撞球台左下為原點，左右為x軸，右為正向；上下為y軸，上為正向。<br /><br />現在這球被以和X軸夾角T的角度擊出，在球台上以直線前進、撞到邊角以入射角等於反射角的方式反彈。最後慢慢減速到靜止，過程總共前進了L這麼長的距離。<br /><br />請你寫個程式，算出最後小白球的座標。<br /><br />提示：假設撞球台無限大，那麼小白球的最後座標將是：<br /><br />(L*cos(T)+x, L*sin(T)+y)<br /><br /><br /><a name='more'></a>========<br /><br />提示是官方給的，大概是怕數學不好不懂三角函數就不會算，很貼心。<br /><br />首先簡單的觀察是，這球實際上可視為在橫長a-r*2、縱長b-r*2矩形中移動的一個點。<br />這很直覺，因為和邊框距離r就會撞上了，從input限制條件也看得出來。<br /><br />接下來是，由於入射角等於反射角，所以X方向的分量並不會因為Y造成碰撞而改變。<br />同理，Y方向的分量也不會因為X造成碰撞而改變。<br /><br />再觀察一下，發現X方向前進2*(a-r*2)之後，x會回到原處；Y方向前進2*(b-r*2)之後，y也會回到原處。<br /><br />所以把x和y分開，可以很輕易透過除法，算出到底來回了幾趟，最後再算實際位置在一趟來回中掉在哪兒。<br /><br />關鍵在想通X和Y的分量分開處理、以及前進2*(台長-球半徑*2)之後會回到原本位置，其它都只是很簡單的計算。