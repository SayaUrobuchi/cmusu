---
layout: post
title: "[paiza] S004:積まれた文字"
date: '2014-12-05T23:13:00.001+08:00'
author: 沙耶
tags:
- paiza
modified_time: '2014-12-09T21:39:05.590+08:00'
blogger_id: tag:blogger.com,1999:blog-8266072452384584139.post-4753129662208883496
blogger_orig_url: http://cmusu.blogspot.com/2014/12/paiza-s004.html
---

你有兩堆卡片，每張卡片都單面寫著一個小寫字母，可能是a~z，並且寫字的一面向上擺放。<br /><div><br /></div><div>接下來，給你一個字串S，你可以用這兩堆卡片來玩一個遊戲：</div><div><br /></div><div><ol><li>兩堆卡片中選一堆喜歡的，將最上面的卡片拿起來。</li><li>如果跟字串S剩下字元中的第一個字不同，就丟掉。</li><li>如果和字串S剩下字元中的第一個字一樣，你可以選擇消掉、或不消掉那個字。不管消不消，卡片都丟掉。</li><li>若字串S被消光光、或兩堆卡片全部用完，就遊戲結束。</li><li>否則回到步驟1。</li></ol><div>這遊戲重要的是，你要選擇取A或B哪一堆卡片。適當選取的話，只需要用掉相當少的卡片就能消完字串S。</div></div><div>相對地如果選得不好，很可能得消去一堆無謂的卡片，或甚至無法將字串S消完。</div><div><br /></div><div>但是，如果事先知道A和B堆著什麼卡片，就能計算出使用最少卡片過關的方式。</div><div>請你寫個程式，計算出最少需要消耗多少卡片。</div><div><br /></div><div>這裡保證所有數據如果你進行適當的選擇，你一定可以把字串S消完。</div><div><br /></div><div><a name='more'></a>========<br /><br />先觀察，首先字串S每個字，一定都是由A或B其中一堆而來。<br />假設S[k]是從A[i]而來，而且有解的話，那麼S[1]到S[k]應該要嘛使用A、要嘛使用B，但不能用到A[i]以後的字。<br />並且存在一個最小的j滿足S[1]到S[k]使用的B堆的字不超過B[j]。這邊看出有子問題。<br /><br />也就是說，這題要找一個數對(i, j)使得S中所有字都可以在A[i]之前、B[j]之前消光。<br />在所有滿足的數對中，取i+j最小者。<br /><br />又，如果我們可以用A[i]和B[j]組出S[1]到S[k]，那我們也可以透過放棄一些卡片，只消掉更少的字。<br />所以，我們只需知道(i, j)最大的k是多少，則0~k都可以在(i, j)內組合出來。<br /><br />從這可以看出它有遞迴的最佳子結構，可以DP。<br /><br />以狀態DP[i][j]=k，表示A使用1~i的字元、B使用1~i的字元，可以消去S最多前k個字。<br />可知DP[0][0]=0，因為A跟B都是空的，一定消不到任何一字。<br />對任意DP[i][j]，若直接捨棄卡片，則為max(DP[i-1][j], DP[i][j-1])。也就是，丟掉A最上面那張，或丟掉B最上面那張，取最佳的。<br /><br />若取A的卡片，則必須滿足S[DP[i-1][j]+1]剛好等於A[i]，也就是A堆在A[i]這張以前，前面最多消了S的前DP[i-1][j]個字，下個字是S[DP[i-1][j]+1]，它必須等於A[i]才能用A[i]消掉它。<br />這時看DP[i-1][j]+1會不會比較好。<br /><br />同理若取B的卡片，則必須滿足S[DP[i][j-1]+1]剛好等於B[j]，也就是B堆在B[j]這張以前，前面最多消了S的前DP[i][j-1]個字，下個字是S[DP[i][j+1]+1]，它必須等於B[j]才能用B[j]消掉它。<br />你可以把DP[i][j-1]用k或其它符號代換一下，就很好懂。<br /><br />在<br /><br /><ol><li>抽A捨棄</li><li>抽B捨棄</li><li>抽A消一字</li><li>抽B消一字</li></ol><div>四種操作都試過後，取最佳的結果。</div><div><br /></div><div>最後對所有DP[i][j]的值等於S的總長度的所有情況，找i+j的最小值就是答案。</div><div><br /></div><div>注意i或j其中為0的狀態，也就是根本不使用A全用B、或不使用B全用A的情形。</div></div>